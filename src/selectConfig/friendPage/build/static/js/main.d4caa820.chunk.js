(this.webpackJsonpchooseconfig=this.webpackJsonpchooseconfig||[]).push([[0],{105:function(e,t,n){e.exports=n(176)},110:function(e,t,n){},111:function(e,t,n){},112:function(e,t,n){},173:function(e,t,n){e.exports=n.p+"static/media/rootCA.45130045.crt"},176:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(9),i=n.n(c),r=(n(110),n(46)),s=n(47),l=n(50),f=n(48),d=n(52),u=(n(111),n(183)),p=n(178),C=n(179),m=n(185),E=n(180),g=(n(112),n(182)),S=n(181),v=n(177),y=n(184),h=n(10),_=g.a.confirm,N=S.a.Meta,A={delete:"delete",select:"select",edit:"edit"},T=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(o)))).restartConfirm=function(){_({title:"\u5207\u6362\u914d\u7f6e",content:"\u4ee3\u7406\u670d\u52a1\u5668\u8fd0\u884c\u4e2d\uff0c\u9700\u8981\u6362\u5230\u5f53\u524d\u914d\u7f6e\u5417\uff1f",okText:"\u597d\u7684",okType:"danger",cancelText:"\u53d6\u6d88\u5207\u6362",onOk:function(){n.selectConfigConfirm()},onCancel:function(){console.log("Cancel")}})},n.selectCurItem=function(){n.props.proxyIsRunning?n.restartConfirm():n.selectConfigConfirm()},n.selectConfigConfirm=function(){n.props.selectConfig(n.props.data)},n.editCurItem=function(){n.props.editConfig(n.props.data)},n.doAction=function(e){switch(e){case A.select:n.selectCurItem();break;case A.edit:n.editCurItem();break;default:console.log("\u6ca1\u6709\u76f8\u5e94\u7684action",e)}},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.data;return o.a.createElement(v.a,{spinning:this.props.runing,tip:o.a.createElement("div",{onClick:this.turnOffProxyServer},"\u4ee3\u7406\u4e2d... ")},o.a.createElement("div",null,o.a.createElement(S.a,{title:o.a.createElement("div",null,o.a.createElement(y.a,{count:this.props.itemIndex+1,style:{backgroundColor:"#52c41a"}}),t.fileData.description),actions:[o.a.createElement("div",{className:"icon-container",onClick:function(){e.doAction(A.select)}},o.a.createElement(h.a,{type:"heart",key:"heart"}),o.a.createElement("span",null,"\u9009\u62e9")),o.a.createElement("div",{className:"icon-container",onClick:function(){e.doAction(A.edit)}},o.a.createElement(h.a,{type:"edit",key:"edit"}),o.a.createElement("span",null,"\u4fee\u6539")),o.a.createElement("div",{className:"icon-container"},o.a.createElement(h.a,{type:"delete",key:"delete"}),o.a.createElement("span",null,"\u5220\u9664"))]},o.a.createElement(N,{description:o.a.createElement("div",null,t.fileData.description?t.fileData.description:"".concat(t.fileName,"\u65e0\u63cf\u8ff0"))}))))}}]),t}(a.Component),O=n(173),I=u.a.Panel,k={FETCH_ALL_CONFIGS:"getAllConfig",SELECT_CONFIG:"select_config",EDIT_CONFIG:"edit_config",START_CALLBACK:"start_callback",GET_CURRENT_CONFIG:"get_current_config",CHECK_UPDATE:"CHECK_UPDATE",GET_PAC_ADDRESS:"GET_PAC_ADDRESS"},D=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(o)))).state={configs:[],startUpSuc:!1,runningConfigName:"",connectError:!1,pacAddress:""},n.selectConfig=function(e){var t={action:k.SELECT_CONFIG,payload:e};n.ws.send(JSON.stringify(t))},n.editConfig=function(e){var t={action:k.EDIT_CONFIG,payload:e};n.ws.send(JSON.stringify(t))},n.showMsg=function(e,t){p.a[e](t)},n.processStartUp=function(e){n.showMsg(e.startSuc?"success":"error",e.msg),n.setState({startUpSuc:e.startSuc},(function(){n.state.startUpSuc&&(n.setState({runningConfigName:e.fileName}),n.ws.send(JSON.stringify({action:k.GET_PAC_ADDRESS})))}))},n.setCurrentConfig=function(e){var t=e.fileName;n.setState({runningConfigName:t}),t&&n.ws.send(JSON.stringify({action:k.GET_PAC_ADDRESS}))},n.setPacAddress=function(e){n.setState({pacAddress:e})},n.setSelectedItemData=function(e){n.setState({curItemConfig:e})},n.versionCompare=function(e){var t=e.latestVersion,a=e.localVersion;if(t!==a){var o="\u68c0\u6d4b\u5230\u65b0\u7248\u672c".concat(t,",\u5f53\u524d\u7248\u672c\u4e3a").concat(a,",\u8bf7\u5347\u7ea7\u83b7\u5f97\u66f4\u591a\u4ee3\u7406\u89c4\u5219\u652f\u6301 + \u9519\u8bef\u4fee\u590d");n.showUpdateTip(o)}},n.checkUpdate=function(e){var t={action:k.CHECK_UPDATE,payload:e};n.ws.send(JSON.stringify(t))},n.showUpdateTip=function(e){C.a.info({message:"b-proxy-cli \u68c0\u6d4b\u5230\u65b0\u7248\u672c",duration:null,description:e})},n.turnOffProxyServer=function(){alert(11)},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new WebSocket("ws://localhost:9876");this.ws=t,t.addEventListener("open",(function(n){console.log("Connection open ..."),e.setState({connectError:!1}),t.send(JSON.stringify({action:k.FETCH_ALL_CONFIGS})),t.send(JSON.stringify({action:k.GET_CURRENT_CONFIG})),e.checkUpdate()})),t.addEventListener("message",(function(t){var n;console.log("Received Message: ",t.data);try{n=JSON.parse(t.data)}catch(s){return void console.warn("\u4f20\u9012\u6570\u636e\u65e0\u6cd5json\u5316\uff0c\u683c\u5f0f\u9519\u8bef")}if(n.action===k.FETCH_ALL_CONFIGS&&e.setState({configs:n.payload}),n.action===k.START_CALLBACK){var a=n.payload;e.processStartUp(a)}if(n.action===k.GET_CURRENT_CONFIG){var o=n.payload;o&&e.setCurrentConfig(o)}if(n.action===k.GET_PAC_ADDRESS){var c=n.payload;c&&e.setPacAddress(c)}if(n.action===k.EDIT_CONFIG){var i=n.payload;i&&e.setSelectedItemData(i)}if(n.action===k.CHECK_UPDATE){var r=n.payload;r&&e.versionCompare(r)}})),t.addEventListener("close",(function(t){console.log("Connection closed."),e.setState({connectError:!0}),setTimeout((function(){window.location.reload()}),1e4)}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App"},this.state.connectError&&o.a.createElement(m.a,{message:"\u4e0e\u4ee3\u7406\u670d\u52a1\u5668\u7684\u901a\u4fe1\u5931\u8d25",description:"\u4ee3\u7406\u670d\u52a1\u5668\u53ef\u80fd\u6ca1\u6709\u542f\u52a8,10s\u540e\u7f51\u9875\u4f1a\u5237\u65b0\u91cd\u8bd5...",type:"error",showIcon:!0}),o.a.createElement("div",{className:"config-container"},this.state.configs.map((function(t,n){return o.a.createElement(T,{selectConfig:e.selectConfig,editConfig:e.editConfig,data:t,proxyIsRunning:0!==e.state.runningConfigName.length,runing:e.state.runningConfigName===t.fileName,key:n,itemIndex:n})}))),o.a.createElement(E.a,null),o.a.createElement("div",{className:"footer"},o.a.createElement("a",{href:O,target:"_blank",download:!0},"\u70b9\u51fb\u4e0b\u8f7d\u6839\u8bc1\u4e66"),!this.state.connectError&&o.a.createElement("div",null,"\u81ea\u52a8\u4ee3\u7406\u914d\u7f6eurl\uff1a",this.state.pacAddress),o.a.createElement(E.a,null),o.a.createElement(u.a,{accordion:!0},o.a.createElement(I,{header:"\u5982\u4f55\u5907\u4efd\u6211\u7684\u914d\u7f6e",key:"1"},o.a.createElement("p",null,"\u7ec4\u4ef6\u5347\u7ea7\u7684\u65f6\u5019\uff0c\u4f1a\u8986\u76d6\u5b89\u88c5\u7ec4\u4ef6\uff0c\u8986\u76d6\u914d\u7f6e\u6587\u4ef6\uff0c\u4e3a\u4e86\u4fdd\u5b58\u4f60\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u8bf7\u62f7\u8d1d\u914d\u7f6e\u6587\u4ef6\u5230\u5176\u4ed6\u5730\u65b9\uff0c\u5f53\u66f4\u65b0\u540e\uff0c\u62f7\u8d1d\u56de\u6765\u5373\u53ef")))))}}]),t}(a.Component);n(175);i.a.render(o.a.createElement(D,null),document.getElementById("root"))}},[[105,1,2]]]);
//# sourceMappingURL=main.d4caa820.chunk.js.map