(this.webpackJsonpchooseconfig=this.webpackJsonpchooseconfig||[]).push([[0],{101:function(e,t,n){e.exports=n(171)},106:function(e,t,n){},107:function(e,t,n){},108:function(e,t,n){},169:function(e,t,n){e.exports=n.p+"static/media/rootCA.45130045.crt"},171:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(9),r=n.n(c),i=(n(106),n(44)),s=n(45),l=n(48),f=n(46),u=n(49),d=(n(107),n(176)),p=n(177),C=(n(108),n(175)),g=n(174),m=n(173),E=n(10),S=C.a.confirm,h=g.a.Meta,y={delete:"delete",select:"select",edit:"edit"},N=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(o)))).restartConfirm=function(){S({title:"\u5207\u6362\u914d\u7f6e",content:"\u4ee3\u7406\u670d\u52a1\u5668\u8fd0\u884c\u4e2d\uff0c\u9700\u8981\u6362\u5230\u5f53\u524d\u914d\u7f6e\u5417\uff1f",okText:"\u597d\u7684",okType:"danger",cancelText:"\u53d6\u6d88\u5207\u6362",onOk:function(){n.selectConfigConfirm()},onCancel:function(){console.log("Cancel")}})},n.selectCurItem=function(){n.props.proxyIsRunning?n.restartConfirm():n.selectConfigConfirm()},n.selectConfigConfirm=function(){n.props.selectConfig(n.props.data)},n.doAction=function(e){switch(e){case y.select:n.selectCurItem();break;default:console.log("\u6ca1\u6709\u76f8\u5e94\u7684action",e)}},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.data;return o.a.createElement(m.a,{spinning:this.props.runing,tip:o.a.createElement("div",{onClick:this.turnOffProxyServer},"\u4ee3\u7406\u4e2d... ")},o.a.createElement("div",null,o.a.createElement(g.a,{title:t.fileName,actions:[o.a.createElement("div",{className:"icon-container",onClick:function(){e.doAction(y.select)}},o.a.createElement(E.a,{type:"heart",key:"heart"}),o.a.createElement("span",null,"\u9009\u62e9")),o.a.createElement("div",{className:"icon-container"},o.a.createElement(E.a,{type:"edit",key:"edit"}),o.a.createElement("span",null,"\u4fee\u6539")),o.a.createElement("div",{className:"icon-container"},o.a.createElement(E.a,{type:"delete",key:"delete"}),o.a.createElement("span",null,"\u5220\u9664"))]},o.a.createElement(h,{description:t.fileData.description}))))}}]),t}(a.Component),A=n(169),_={FETCH_ALL_CONFIGS:"getAllConfig",SELECT_CONFIG:"select_config",START_CALLBACK:"start_callback",GET_CURRENT_CONFIG:"get_current_config",GET_PAC_ADDRESS:"GET_PAC_ADDRESS"},v=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(o)))).state={configs:[],startUpSuc:!1,runningConfigName:"",connectError:!1,pacAddress:""},n.selectConfig=function(e){var t={action:_.SELECT_CONFIG,payload:e};n.ws.send(JSON.stringify(t))},n.showMsg=function(e,t){d.a[e](t)},n.processStartUp=function(e){n.showMsg(e.startSuc?"success":"error",e.msg),n.setState({startUpSuc:e.startSuc},(function(){n.state.startUpSuc&&(n.setState({runningConfigName:e.fileName}),n.ws.send(JSON.stringify({action:_.GET_PAC_ADDRESS})))}))},n.setCurrentConfig=function(e){var t=e.fileName;n.setState({runningConfigName:t}),t&&n.ws.send(JSON.stringify({action:_.GET_PAC_ADDRESS}))},n.setPacAddress=function(e){n.setState({pacAddress:e})},n.turnOffProxyServer=function(){alert(11)},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new WebSocket("ws://localhost:9876");this.ws=t,t.onopen=function(n){console.log("Connection open ..."),e.setState({connectError:!1}),t.send(JSON.stringify({action:_.FETCH_ALL_CONFIGS})),t.send(JSON.stringify({action:_.GET_CURRENT_CONFIG}))},t.onmessage=function(t){var n;console.log("Received Message: ",t.data);try{n=JSON.parse(t.data)}catch(r){return void console.warn("\u4f20\u9012\u6570\u636e\u65e0\u6cd5json\u5316\uff0c\u683c\u5f0f\u9519\u8bef")}if(n.action===_.FETCH_ALL_CONFIGS&&e.setState({configs:n.payload}),n.action===_.START_CALLBACK){var a=n.payload;e.processStartUp(a)}if(n.action===_.GET_CURRENT_CONFIG){var o=n.payload;o&&e.setCurrentConfig(o)}if(n.action===_.GET_PAC_ADDRESS){var c=n.payload;c&&e.setPacAddress(c)}},t.onclose=function(t){console.log("Connection closed."),e.setState({connectError:!0}),setTimeout((function(){window.location.reload()}),1e4)}}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App"},this.state.connectError&&o.a.createElement(p.a,{message:"\u4e0e\u4ee3\u7406\u670d\u52a1\u5668\u7684\u901a\u4fe1\u5931\u8d25",description:"\u4ee3\u7406\u670d\u52a1\u5668\u53ef\u80fd\u6ca1\u6709\u542f\u52a8,10s\u540e\u7f51\u9875\u4f1a\u5237\u65b0\u91cd\u8bd5...",type:"error",showIcon:!0}),o.a.createElement("div",{className:"config-container"},this.state.configs.map((function(t,n){return o.a.createElement(N,{selectConfig:e.selectConfig,data:t,proxyIsRunning:0!==e.state.runningConfigName.length,runing:e.state.runningConfigName===t.fileName,key:n})}))),o.a.createElement("div",{className:"footer"},o.a.createElement("a",{href:A,target:"_blank",download:!0},"\u70b9\u51fb\u4e0b\u8f7d\u6839\u8bc1\u4e66"),!this.state.connectError&&o.a.createElement("div",null,"\u81ea\u52a8\u4ee3\u7406\u914d\u7f6eurl\uff1a",this.state.pacAddress)))}}]),t}(a.Component);n(170);r.a.render(o.a.createElement(v,null),document.getElementById("root"))}},[[101,1,2]]]);
//# sourceMappingURL=main.1534bcdc.chunk.js.map